function getCountries(t){$.getJSON("../php/api.php?key=570938f00c1f30c59530b15fc930dd0f&format=json").done(function(e){var a=[];$.each(e,function(t,e){var n=e.name,i=e.country_code,o=e.alpha_2,r=e.alpha_3,u=e.data;if(Object.keys(u).length>5){var d=new Country(n,o,r,i);$.each(u,function(t,e){var a=e.name,n=parseFloat(e.value),i=e.unit,o=new Data(a,n,i);d.addData(o)}),a[i]=d}}),t(a)}).fail(function(){t(!1)})}function onSelectChange(t){var e=t.parent().index();$.each($(".data"),function(){$(".content .item",this).eq(e).empty()});var a=parseInt(t.find("option:selected").attr("value"),10),n=world.countries[a],i=t.parent().find(".countryTitle"),o='<img src="images/country-flags/'+n.alpha2.toLowerCase()+'.png" height="30" />';i.find("h1").html(o+n.name),i.find(".populationTotal").empty(),t.hide(200,function(){counter(n.data[3].value,i.find(".populationTotal"),2e3),i.fadeIn(500,"easeOutElastic")}),makeGraph(n.getPopulation(),1e3*n.data[0].value,$(".dataSquareMeter .content .item").eq(e),"squareMeter"),makeGraph(n.getPopulation(),n.data[1].value/1e3*n.getPopulation(),$(".dataCar .content .item").eq(e),"car"),makeGraph(n.getPopulation(),n.data[2].value/100*n.getPopulation(),$(".dataLightbulb .content .item").eq(e),"lightbulb"),makeGraph(n.getPopulation(),n.data[5].value*n.getPopulation(),$(".dataWater .content .item").eq(e),"water")}function easeOutQuint(t,e,a,n){return a*((t=t/n-1)*t*t*t*t+1)+e}function splitNumbers(t){var e=(""+t).split(""),a="";for(var n in e)a+="<span>"+e[n]+"</span>";return a}function counter(t,e,a,n,i,o){function r(e){return t>u?(u=n?Math.round(100*easeOutQuint(e-s,0,t,a))/100:Math.round(easeOutQuint(e-s,0,t,a)),digitsHtml=splitNumbers(u),d.empty(),n?d.append(digitsHtml,l):d.append(digitsHtml),!0):(digitsHtml=splitNumbers(t),d.empty(),n?d.append(digitsHtml,l):d.append(digitsHtml),void 0!==o&&o(),!1)}var u=0,d=$("<div/>").addClass("digits");e.append(d);var c="<div class='text'><div class='texttext'>";switch(i){case"squareMeter":c+="1000 Square meter land area";break;case"car":c+="Motorized vehicles";break;case"lightbulb":c+="100 kWh Electricity per year";break;case"water":c+="Billion cubic meters water per year"}c+=" / </div><div class='iconPerson'></div></div>";var s,l=$(c);s=(new Date).getTime(),animation.addAnimation(r)}function makeGraph(t,e,a,n){var i=e/t,o=i%1,r=i-o,u=Math.round(100*o);counter(Math.round(100*i)/100,a,5e3,!0,n);for(var d=5e3/r,c=0;r>c;c++)setTimeout(function(){new Icon(100,n,a)},c*d);setTimeout(function(){(u>0||0===r)&&(icon=new Icon(u,n,a))},r*d)}function addItem(t,e){var a=$("<div/>").addClass("itembackground");a.hide(),$("#backgrounds").append(a),a.fadeIn(500,"easeOutQuint");var n=$("<header/>");n.html(e);var i=t.clone();n.find(".countryTitle").click(function(){$(this).fadeOut(200,function(){$(this).parent().find(".countrySelect").show(200).trigger("click")})}),i.change(function(){onSelectChange($(this))}),n.append(i),$(".headers").append(n),$(".content").each(function(){var t=$("<div/>").addClass("item");$(this).append(t)})}